
- Как будем внедрять SumSub? Будем ли делать тогл?
- Будем ли проверять наличие адреса INE?
- Как будем проверять возраст, национальность? 
- Не хотим размазывать проверки по всему флоу
- В демонстрации SumSub было показано, как настраиваются рулы

- Должна быть логика распределения на KYC провайдеров через N8N
- Передаем id в N8N, он выполняет все ручные проверки
- Есть шаг pre-scoring
- Блэклист тоже должен запускаться через N8N 
- В бакет нужно прихранивать ответ от N8N
- Должна быть APIшка на бэке должна быть из N8N
- Запуск на sumsub - q4

На синке договорились о следующем:
Откладываем полноценный переход на SumSub на Q4, так как после обсуждения появился блокер в виде интеграции с N8N, в рамках которой будут выполняться все хардруловые проверки клиентов.

Все проверки, проводимые в рамках origination разделяем на 2 группы:
1. Пре-скоринг (все проверки до шага KYC)
2. Скоринг (все проверки после шага KYC)

На этапе пре-скоринга (на шаге CURP/RFC):
   - в N8N должен отправляться CURP, введенный клиентом
   - внутри N8N СURP должен проверяться на совершеннолетие клиента (GALJ**850314**HDFRPN07: 5-10 символы)
   - внутри N8N СURP должен проверяться на национальность клиента (GALJ850314H**DF**RPN07: 12-13 символы)
   - опционально можем добавить на этот шаг проверку клиента на вхождение в Blacklist через N8N
   
На этапе скоринга:
- в N8N должен отправляться результат проверки SumSub, по которому "reviewStatus" : "completed"
- из N8N по id конкретного клиента должен вызываться SumSub метод
  `resources/applicants/{applicantId}/one` (https://docs.sumsub.com/reference/get-applicant-data)
- в N8N должна выполняться проверка результата из SumSub и выноситься финальный вердикт
- в N8N должна выполняться проверка результата вызова метода "Get applicant data" на предмет наличия в пэйлоуде адреса INE (и опционально его совпадение с адресом из origination)


Есть хэндлер OwnFundingKYCPost

На фронт приходит полотно, которое нужно отправить на BE.
Нужно валидировать данные с фронта перед отправкой на BE (validateSdkKYC)
Если что-то не провалидировалосб, записываем это поле в invalid fields.

Далее сырой пэйлоуд сохраняется в S3 бакет.
Реквест тоже храним в S3? 

Далее обновляем UoD через application (1-click flow)

Далее нормализуем KYC адрес (enrichment).

Финально прогружаем decision в таблицу scoring.
При плохом decision заполняем ризоны.

Отстреливаем асинхронный ивент в топик, он уходит в инбокс. Будем дергать API CDC и отдавать им репорт.

Что за диспатч ивент для CDC? Когда он отстреливается? 

Вася переделывал логику записи в partners enrichment. Все партнерские вызовы хранятся в partners enrichment.

Нужно унифицировать десижены в partners enrichment.

Хардруловые проверки Trully переедут в SEON



