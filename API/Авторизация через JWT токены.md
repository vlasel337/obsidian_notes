Видео: https://www.youtube.com/watch?v=D8KggyvCRrg&t=550s

Background:
- Так как каждое действие в веб-приложении – это отдельный запрос к сервису (добавление в избранное, подписка, поиск), каждый из них требует аутенитификации и авторизации. 
- Эта проблема частично решается созданием пользовательской сессии в рамках которой для каждого отдельного запроса на конкретный сервер не нужно будет отдельно производить аутентификацию и авторизацию. 
- Однако, пользователь может подключаться к  разным серверам приложения, которые ничего не знают о ранее созданной сессии.

**JWT (JSON Web Token)** – это "цифровой паспорт" пользователя в приложении, в котором записана вся ключевая информация для авторизации и аутентификации в приложении (кто он, какие у него права доступа, какой срок действия токена и тд.). 

**Аутентификация** – процесс подтверждения личности в начале взаимодействия с системой (ввод логина и пароля).

**Авторизация** – процесс проверки прав доступа (дополнительная проверка на наличие тех или иных прав).

Как правило, JWT-токен создается отдельной функцией в приложении, которая принимает на вход логин, пароль и права доступа пользователя и упаковывает их в формат JWT-токена.

JWT-токен представляет из себя строку, состоящую из трех частей, разделенных точкой:
```JWT
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.
eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.
SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c
```

Предназначение частей JWT-токена:
1. В первой части строки при помощи Base64 закодирован объект **header** с настройками JWT-токена (алгоритм шифрования и тип токена), которые разработчики определяют единожды.
2. Во второй части при помощи Base64 закодирован объект **payload** со всеми данными пользователя (в том числе и со сроком жизни токена), который логинится в приложении, <u>за исключением пароля</u>.
3. В третьей части токена при помощи специальной функции шифруется комбинация объектов **header**, **payload** и **secret** (секретного ключа шифрования, который хранится на серверах приложения), из которой получается объект **signature** (цифровая подпись).

Алгоритм работы JWT-токена:
1. Пользователь логинится в приложении (вводит логин и пароль).
2. Сервер проверяет учетные данные пользователя и создает JWT-токен, который возвращает пользователю.
3. Браузер пользователя сохраняет JWT-токен на своей стороне.
4. При последующих запросах браузер автоматически будет прикреплять к ним JWT-токен.
5. Сервер при получении токена будет разделять токен на три части, декодировать их, а затем создавать на их основе цифровую подпись signature, которую сравнит с той, что пришла в третьей части токена. Посредством такой процедуры сервер сможет установить факто того, что запрос пришел именно от этого пользователя.

Таким образом из-за наличия JWT-токена клиенту не нужно будет заново проходить аутентификацию и авторизацию при подключении к другим серверам одного и того же приложения (например, при путешествиях). Данные в токене легко расшифровать, но их нельзя подделать без секретного ключа, который используется в создании подписи.




