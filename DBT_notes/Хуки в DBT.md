**Хуки** существуют в DBT для того, чтобы запускать определенные сервисные процессы до и после материализации [[Модели в DBT|модели]] или [[Seeds (csv-файлы) в DBT|сида]]. 

Хуки используются для:
- настройки доступов, 
- оптимизации таблиц (**analyze** для обновления статистики для планировщика, **vacuum** чистит мертвые записи, возникающие, например из-за обновления записей), 
- обновления метаданных, 
- выгрузки данных наружу.

Хуки различаются между собой в соответствии с моментом, когда они должны отработать:
- **pre-hook** -выполняются перед запуском модели/сида;
- **post-hook** - выполняются после запуска модели/сида;
- **on-run-start** - выполняются в начале работы dbt проекта;
- **on-run-end** - выполняются после того, как dbt проект отработал.

Хуки задаются:
- как на уровне моделей (pre-hook, post-hook) в файле c конфигурациями `properties.yml`,
- так и на уровне всего проекта (on-run-start, on-run-end) в файле `dbt_project.yml`.

Пример регистрации post-hook на уровне модели в конфигурационном файле `properties.yml`:
```yml
models:
	- name: "trips_users"
	  description: "Rides enriched with users personal data"
	  config:
		  materialized: "incremental"
		  post-hook:
			  - "analyze dbt.trips_users"
			  - sql: "vacuum dbt.trips_users"
				transaction: false
```

Если операция в хуке должна работать в **транзакции отдельной от материализации** объекта (актуально для операции vacuum), то необходимо усложнить хук путем добавления параметра:
`sql: "vacuum dbt.trips_users"`
`transaction: false`







