В HDFS данные хранилище разбито на логические единицы - блоки размером 128 mb. 
В HDFS каждый файл хранится в таком блоке, а метаданные блока хранятся в памяти узла имен (NameNode) в виде объекта. Файлы и блоки являются объектами имен и занимают пространство имен.

Это означает, что емкость пространства имен системы ограничена физической памятью узла имен. Примерный размер для хранения каждого такого объекта в пространстве имен равен 150 байт. Поэтому, например, 20 миллионов файлов займут 3 ГБ памяти.

Небольшие файлы HDFS хранит совсем неэффективно: много мелких файлов будут занимать много места на NameNode, хотя сами небольшие файлы не занимают больше места на диске, чем требуется для хранения их содержимого. 

Способы борьбы с проблемой малых файлов:

- Упаковка малых файлов в архив HAR (один большой файл)
- Можно вручную установить размер блока HDFS
- Можно переопределить параметр shuffle.partition